{"version":3,"sources":["../index.js"],"names":["MongoClient","require","assert","url","insertDocument","db","callback","collection","insertOne","Date","err","equal","console","log","findRestaurants","find","toArray","doc","dir","updateRestaurants","updateOne","$set","$currentDate","results","removeRestaurants","deleteMany","connect","close","process","exit"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Created by Eng Chrispinus on 10/12/2016.\n */\n\n\n/*eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"log\", \"dir\"] }] */\n\n\nvar MongoClient = require(\"mongodb\").MongoClient;\nvar assert = require(\"assert\");\nvar url = \"mongodb://localhost:27017/meanstack\";\n\n\nvar insertDocument = (db, callback) => {\n    db.collection(\"restaurants\").insertOne({\n        \"address\": {\n            \"street\": \"2 Avenue\",\n            \"zipcode\": \"10075\",\n            \"building\": \"1480\",\n            \"coord\": [-73.9557413, 40.7720266]\n        },\n        \"borough\": \"Manhattan\",\n        \"cuisine\": \"Italian\",\n        \"grades\": [\n            {\n                \"date\": new Date(\"2014-10-01T00:00:00Z\"),\n                \"grade\": \"A\",\n                \"score\": 11\n            },\n            {\n                \"date\": new Date(\"2014-01-16T00:00:00Z\"),\n                \"grade\": \"B\",\n                \"score\": 17\n            }\n        ],\n        \"name\": \"Vella\",\n        \"restaurant_id\": \"41704620\"\n    }, function (err) {\n        assert.equal(err, null);\n        console.log(\"Inserted a document into the restaurants collection.\");\n        console.log(\"Calling the INSERT call back\");\n        callback();\n    });\n};\n\n\nvar findRestaurants = function (db, callback) {\n    db.collection(\"restaurants\").find().toArray(function (err, doc) {\n        assert.equal(err, null);\n        if (doc != null) {\n            console.dir(doc);\n        } else {\n            console.log(\"Calling the FIND call back \");\n            callback();\n        }\n    });\n};\n\n\nvar updateRestaurants = function (db, callback) {\n    db.collection(\"restaurants\").updateOne(\n        {\"name\": \"Vella\", \"grades.grade\": \"B\"},\n        {\n            $set: {\"cuisine\": \"American (New)\", \"grades.$.score\": 20},\n            $currentDate: {\"lastModified\": true}\n        }, function (err, results) {\n            console.log(results);\n            console.log(\"Calling the UPDATE call back \");\n            callback();\n        });\n};\n\n\nvar removeRestaurants = function (db, callback) {\n    db.collection(\"restaurants\").deleteMany(\n        {\"borough\": \"Manhattan\"},\n        function (err, results) {\n            console.log(results);\n            callback();\n        }\n    );\n};\n\n\nMongoClient.connect(url, function (err, db) {\n    assert.equal(null, err);\n\n    insertDocument(db, function () {\n        db.close();\n    });\n\n    console.log(\"Passed 1\");\n\n    findRestaurants(db, function () {\n        db.close();\n    });\n\n\n    console.log(\"Passed 2\");\n    updateRestaurants(db, function () {\n        db.close();\n    });\n\n\n    console.log(\"Passed 3\");\n    findRestaurants(db, function () {\n        db.close();\n    });\n\n\n    console.log(\"Passed 4\");\n    removeRestaurants(db, function () {\n        db.close();\n    });\n\n\n    console.log(\"Passed 5\");\n    findRestaurants(db, function () {\n        db.close();\n    });\n\n    process.exit(0);\n});\n"]}