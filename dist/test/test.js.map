{"version":3,"sources":["../../test/test.js"],"names":["superagent","assert","status","express","wagner","URL_ROOT","server","Donor","BloodGroup","models","app","require","invoke","use","listen","close","done","remove","error","ifError","bloodgroup","donors","_id","bloodType","canDonateTo","canRecieveFrom","antigens","antibodies","firstName","lastName","phone","email","location","geoLong","geoLat","bloodGroup","data","lastDonation","create","bloodgroups","url","get","res","results","equal","OK","doesNotThrow","JSON","parse","text","ok","length"],"mappings":"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","file":"test.js","sourcesContent":["/**\n * Created by chrisp on 24/08/2016.\n */\nimport {describe, it,before, after, beforeEach} from \"mocha\";\n\n\nlet superagent, assert, status, express, wagner, URL_ROOT, server, Donor, BloodGroup, models, app;\n\nsuperagent = require(\"superagent\");\nassert = require(\"assert\");\nstatus = require(\"http-status\");\nexpress = require(\"express\");\nwagner = require(\"wagner-core\");\n\nURL_ROOT = \"http://localhost:3000\";\n// var PRODUCT_ID = \"000000000000000000000001\";\n\ndescribe(\"Blood Group API \", ()=> {\n\tbefore(()=> {\n\t\tapp = express();\n\t\trequire(\"./../public/javascripts/server/models\")(wagner);\n\n\t\tmodels = wagner.invoke((Donor, BloodGroup) => {\n\t\t\treturn {\n\t\t\t\tDonor: Donor,\n\t\t\t\tBloodGroup: BloodGroup\n\t\t\t};\n\t\t});\n\n\t\tDonor = models.Donor;\n\t\tBloodGroup = models.BloodGroup;\n\n\t\tapp.use(require(\"./../routes/api\")(wagner));\n\n\t\tserver = app.listen(3000);\n\n\n\t});\n\n\tafter(()=> {\n\t\tserver.close();\n\t});\n\n\tbeforeEach((done)=> {\n\n\t\tBloodGroup.remove({}, (error) => {\n\t\t\tassert.ifError(error);\n\t\t\tDonor.remove({}, (error) => {\n\t\t\t\tassert.ifError(error);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t});\n\n\tbeforeEach((done)=> {\n\t\tlet bloodgroup, donors;\n\n\t\tbloodgroup = [\n\t\t\t{\n\t\t\t\t_id: \"A+\",\n\t\t\t\tbloodType: \"A\",\n\t\t\t\tcanDonateTo: [\"A+\", \"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A+\", \"A-\", \"O+\", \"O-\"],\n\t\t\t\tantigens: \"A\",\n\t\t\t\tantibodies: \"Anti-B\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"A-\",\n\t\t\t\tbloodType: \"A\",\n\t\t\t\tcanDonateTo: [\"A+\", \"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A-\", \"O-\"],\n\t\t\t\tantigens: \"A\",\n\t\t\t\tantibodies: \"Anti-B\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"B+\",\n\t\t\t\tbloodType: \"B\",\n\t\t\t\tcanDonateTo: [\"AB+\", \"B+\"],\n\t\t\t\tcanRecieveFrom: [\"B+\", \"B-\", \"O+\", \"O-\"],\n\t\t\t\tantigens: \"B\",\n\t\t\t\tantibodies: \"Anti-A\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"B-\",\n\t\t\t\tbloodType: \"B\",\n\t\t\t\tcanDonateTo: [\"AB+\", \"B+\", \"AB-\", \"B-\"],\n\t\t\t\tcanRecieveFrom: [\"B-\", \"O-\"],\n\t\t\t\tantigens: \"B\",\n\t\t\t\tantibodies: \"Anti-A\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"AB+\",\n\t\t\t\tbloodType: \"AB\",\n\t\t\t\tcanDonateTo: [\"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A+\", \"B+\", \"AB+\", \"O+\", \"A-\", \"B-\", \"AB-\", \"O-\"],\n\t\t\t\tantigens: \"A and B\",\n\t\t\t\tantibodies: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"AB-\",\n\t\t\t\tbloodType: \"AB\",\n\t\t\t\tcanDonateTo: [\"AB-\", \"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A-\", \"B-\", \"AB-\", \"O-\"],\n\t\t\t\tantigens: \"A and B\",\n\t\t\t\tantibodies: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"O+\",\n\t\t\t\tbloodType: \"O\",\n\t\t\t\tcanDonateTo: [\"A+\", \"B+\", \"AB+\", \"O+\"],\n\t\t\t\tcanRecieveFrom: [\"O+\", \"O-\"],\n\t\t\t\tantigens: \"None\",\n\t\t\t\tantibodies: \"Anti-B and Anti-A\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"O-\",\n\t\t\t\tbloodType: \"O\",\n\t\t\t\tcanDonateTo: [\"O-\"],\n\t\t\t\tcanRecieveFrom: [\"O-\"],\n\t\t\t\tantigens: \"A\",\n\t\t\t\tantibodies: \"Anti-B and Anti-A\"\n\t\t\t}\n\t\t];\n\n\t\tdonors = [\n\t\t\t{\n\t\t\t\tfirstName: \"Onyancha\",\n\t\t\t\tlastName: \"Chrispinus\",\n\t\t\t\tphone: \"+254703326159\",\n\t\t\t\temail: \"onyanchachrispinus@gmail.com\",\n\t\t\t\tlocation: {\n\t\t\t\t\tgeoLong: 50.00,\n\t\t\t\t\tgeoLat: 50.00\n\t\t\t\t},\n\t\t\t\tbloodGroup: bloodgroup[0],\n\t\t\t\tdata: {\n\t\t\t\t\tlastDonation: 1546453\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tfirstName: \"Patric\",\n\t\t\t\tlastName: \"OPut\",\n\t\t\t\tphone: \"+254767453422\",\n\t\t\t\temail: \"on@gmail.com\",\n\t\t\t\tlocation: {\n\t\t\t\t\tgeoLong: 35.00,\n\t\t\t\t\tgeoLat: 25.00\n\t\t\t\t},\n\t\t\t\tbloodGroup: bloodgroup[4],\n\t\t\t\tdata: {\n\t\t\t\t\tlastDonation: 1546453\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tfirstName: \"Onango\",\n\t\t\t\tlastName: \"denis\",\n\t\t\t\tphone: \"+256709815909\",\n\t\t\t\temail: \"ts@gmail.com\",\n\t\t\t\tlocation: {\n\t\t\t\t\tgeoLong: 45.00,\n\t\t\t\t\tgeoLat: 60.00\n\t\t\t\t},\n\t\t\t\tbloodGroup: bloodgroup[5],\n\t\t\t\tdata: {\n\t\t\t\t\tlastDonation: 1566453\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\n\n\n\t\tBloodGroup.create(bloodgroup, (error, bloodgroups)=> {\n\t\t\tassert.ifError(error);\n\t\t\tDonor.create(donors, (error, donors)=> {\n\t\t\t\tassert.ifError(error);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t});\n\n\n\tit(\"Load the first User in the database \", (done)=> {\n\n\t\tvar url = URL_ROOT + \"/donor/search/50.9/50.9/10/10\";\n\t\tsuperagent.get(url, (error, res)=> {\n\t\t\tvar results = \"\";\n\t\t\tassert.ifError(error);\n\t\t\tassert.equal(res.status, status.OK);\n\t\t\tassert.doesNotThrow(()=> {\n\t\t\t\tresults = JSON.parse(res.text).donors;\n\t\t\t});\n\t\t\tassert.ok(results.length, 1);\n\t\t\tassert.ok(results[0].firstName, \"Onyancha\");\n\t\t\tdone();\n\t\t});\n\t});\n\n\n});"]}