{"version":3,"sources":["../../test/test.js"],"names":["superagent","assert","status","express","wagner","URL_ROOT","server","Donor","BloodGroup","models","app","hashSalt","require","describe","before","invoke","use","listen","after","close","beforeEach","done","remove","error","ifError","bloodgroup","donors","_id","bloodType","canDonateTo","canRecieveFrom","antigens","antibodies","firstName","lastName","phone","email","password","loc","coordinates","bloodGroup","data","lastDonation","create","bloodgroups","it","url","get","res","results","equal","OK","doesNotThrow","JSON","parse","text","ok","length"],"mappings":";;AAAA;;;;AAIC;;AAGD,IAAIA,mBAAJ;AAAA,IAAgBC,eAAhB;AAAA,IAAwBC,eAAxB;AAAA,IAAgCC,gBAAhC;AAAA,IAAyCC,eAAzC;AAAA,IAAiDC,iBAAjD;AAAA,IACCC,eADD;AAAA,IACSC,cADT;AAAA,IACgBC,mBADhB;AAAA,IAC4BC,eAD5B;AAAA,IACoCC,YADpC;AAAA,IACyCC,iBADzC;;AAGAX,aAAaY,QAAQ,YAAR,CAAb;AACAX,SAASW,QAAQ,QAAR,CAAT;AACAV,SAASU,QAAQ,aAAR,CAAT;AACAT,UAAUS,QAAQ,SAAR,CAAV;AACAR,SAASQ,QAAQ,aAAR,CAAT;;AAEAP,WAAW,uBAAX;AACAM,WAAW,iBAAX;AACA;;AAEAE,SAAS,kBAAT,EAA6B,YAAK;AACjCC,QAAO,YAAK;AACXJ,QAAMP,SAAN;AACAS,UAAQ,oBAAR,EAA8BR,MAA9B;;AAEAK,WAASL,OAAOW,MAAP,CAAc,UAACR,KAAD,EAAQC,UAAR,EAAuB;AAC7C,UAAO;AACND,WAAOA,KADD;AAENC,gBAAYA;AAFN,IAAP;AAIA,GALQ,CAAT;;AAOAD,UAAQE,OAAOF,KAAf;AACAC,eAAaC,OAAOD,UAApB;;AAEAE,MAAIM,GAAJ,CAAQJ,QAAQ,iBAAR,EAA2BR,MAA3B,CAAR;;AAEAE,WAASI,IAAIO,MAAJ,CAAW,IAAX,CAAT;AAGA,EAnBD;;AAqBAC,OAAM,YAAK;AACVZ,SAAOa,KAAP;AACA,EAFD;;AAIAC,YAAW,UAACC,IAAD,EAAS;;AAEnBb,aAAWc,MAAX,CAAkB,EAAlB,EAAsB,UAACC,KAAD,EAAW;AAChCtB,UAAOuB,OAAP,CAAeD,KAAf;AACAhB,SAAMe,MAAN,CAAa,EAAb,EAAiB,UAACC,KAAD,EAAW;AAC3BtB,WAAOuB,OAAP,CAAeD,KAAf;AACAF;AACA,IAHD;AAIA,GAND;AAQA,EAVD;;AAYAD,YAAW,UAACC,IAAD,EAAS;AACnB,MAAII,mBAAJ;AAAA,MAAgBC,eAAhB;;AAEAD,eAAa,CACZ;AACCE,QAAK,IADN;AAECC,cAAW,GAFZ;AAGCC,gBAAa,CAAC,IAAD,EAAO,KAAP,CAHd;AAICC,mBAAgB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAJjB;AAKCC,aAAU,GALX;AAMCC,eAAY;AANb,GADY,EASZ;AACCL,QAAK,IADN;AAECC,cAAW,GAFZ;AAGCC,gBAAa,CAAC,IAAD,EAAO,KAAP,CAHd;AAICC,mBAAgB,CAAC,IAAD,EAAO,IAAP,CAJjB;AAKCC,aAAU,GALX;AAMCC,eAAY;AANb,GATY,EAiBZ;AACCL,QAAK,IADN;AAECC,cAAW,GAFZ;AAGCC,gBAAa,CAAC,KAAD,EAAQ,IAAR,CAHd;AAICC,mBAAgB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAJjB;AAKCC,aAAU,GALX;AAMCC,eAAY;AANb,GAjBY,EAyBZ;AACCL,QAAK,IADN;AAECC,cAAW,GAFZ;AAGCC,gBAAa,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAqB,IAArB,CAHd;AAICC,mBAAgB,CAAC,IAAD,EAAO,IAAP,CAJjB;AAKCC,aAAU,GALX;AAMCC,eAAY;AANb,GAzBY,EAiCZ;AACCL,QAAK,KADN;AAECC,cAAW,IAFZ;AAGCC,gBAAa,CAAC,KAAD,CAHd;AAICC,mBAAgB,CAAC,IAAD,EAAO,IAAP,EAAa,KAAb,EAAoB,IAApB,EAA0B,IAA1B,EAAgC,IAAhC,EAAsC,KAAtC,EAA6C,IAA7C,CAJjB;AAKCC,aAAU,SALX;AAMCC,eAAY;AANb,GAjCY,EAyCZ;AACCL,QAAK,KADN;AAECC,cAAW,IAFZ;AAGCC,gBAAa,CAAC,KAAD,EAAQ,KAAR,CAHd;AAICC,mBAAgB,CAAC,IAAD,EAAO,IAAP,EAAa,KAAb,EAAoB,IAApB,CAJjB;AAKCC,aAAU,SALX;AAMCC,eAAY;AANb,GAzCY,EAiDZ;AACCL,QAAK,IADN;AAECC,cAAW,GAFZ;AAGCC,gBAAa,CAAC,IAAD,EAAO,IAAP,EAAa,KAAb,EAAoB,IAApB,CAHd;AAICC,mBAAgB,CAAC,IAAD,EAAO,IAAP,CAJjB;AAKCC,aAAU,MALX;AAMCC,eAAY;AANb,GAjDY,EAyDZ;AACCL,QAAK,IADN;AAECC,cAAW,GAFZ;AAGCC,gBAAa,CAAC,IAAD,CAHd;AAICC,mBAAgB,CAAC,IAAD,CAJjB;AAKCC,aAAU,GALX;AAMCC,eAAY;AANb,GAzDY,CAAb;;AAmEAN,WAAS,CACR;AACCO,cAAW,UADZ;AAECC,aAAU,YAFX;AAGCC,UAAO,eAHR;AAICC,UAAO,8BAJR;AAKCC,aAAU1B,WAAS,UALpB;AAMa2B,QAAK,EAAEC,aAAY,CAAE,SAAF,EAAa,QAAb,CAAd,EANlB;AAOCC,eAAYf,WAAW,CAAX,CAPb;AAQCgB,SAAM;AACLC,kBAAc;AADT;AARP,GADQ,EAYL;AACFT,cAAW,QADT;AAEFC,aAAU,MAFR;AAGFC,UAAO,eAHL;AAIFC,UAAO,cAJL;AAKFC,aAAU1B,WAAS,WALjB;AAMU2B,QAAK,EAAEC,aAAY,CAAE,SAAF,EAAa,QAAb,CAAd,EANf;AAOFC,eAAYf,WAAW,CAAX,CAPV;AAQFgB,SAAM;AACLC,kBAAc;AADT;AARJ,GAZK,EAuBL;AACFT,cAAW,QADT;AAEFC,aAAU,OAFR;AAGFC,UAAO,eAHL;AAIFC,UAAO,cAJL;AAKFC,aAAU1B,WAAS,YALjB;AAMF2B,QAAK,EAAEC,aAAY,CAAE,SAAF,EAAa,QAAb,CAAd,EANH;AAOFC,eAAYf,WAAW,CAAX,CAPV;AAQFgB,SAAM;AACLC,kBAAc;AADT;AARJ,GAvBK,CAAT;;AAuCAlC,aAAWmC,MAAX,CAAkBlB,UAAlB,EAA8B,UAACF,KAAD,EAAQqB,WAAR,EAAuB;AACpD3C,UAAOuB,OAAP,CAAeD,KAAf;AACA;AACA;AACA;AACC;AACAF;AACD;AACA,GARD;AAUA,EAvHD;;AA0HAwB,IAAG,sCAAH,EAA2C,UAACxB,IAAD,EAAS;;AAEnD,MAAIyB,MAAMzC,WAAW,0CAArB;AACAL,aAAW+C,GAAX,CAAeD,GAAf,EAAoB,UAACvB,KAAD,EAAQyB,GAAR,EAAe;AAClC,OAAIC,UAAU,EAAd;AACAhD,UAAOuB,OAAP,CAAeD,KAAf;AACAtB,UAAOiD,KAAP,CAAaF,IAAI9C,MAAjB,EAAyBA,OAAOiD,EAAhC;AACAlD,UAAOmD,YAAP,CAAoB,YAAK;AACxBH,cAAUI,KAAKC,KAAL,CAAWN,IAAIO,IAAf,EAAqB7B,MAA/B;AACA,IAFD;AAGAzB,UAAOuD,EAAP,CAAUP,QAAQQ,MAAlB,EAA0B,CAA1B;AACAxD,UAAOuD,EAAP,CAAUP,QAAQ,CAAR,EAAWhB,SAArB,EAAgC,UAAhC;AACAZ;AACA,GAVD;AAWA,EAdD;AAiBA,CAjLD","file":"test.js","sourcesContent":["/**\n * Created by chrisp on 24/08/2016.\n */\n\n /*eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"log\", \"dir\"] }] */\n\n\nlet superagent, assert, status, express, wagner, URL_ROOT,\n\tserver, Donor, BloodGroup, models, app, hashSalt;\n\nsuperagent = require(\"superagent\");\nassert = require(\"assert\");\nstatus = require(\"http-status\");\nexpress = require(\"express\");\nwagner = require(\"wagner-core\");\n\nURL_ROOT = \"http://localhost:3000\";\nhashSalt = \"IHngate#bi*Tall\";\n// var PRODUCT_ID = \"000000000000000000000001\";\n\ndescribe(\"Blood Group API \", ()=> {\n\tbefore(()=> {\n\t\tapp = express();\n\t\trequire(\"./../models/models\")(wagner);\n\n\t\tmodels = wagner.invoke((Donor, BloodGroup) => {\n\t\t\treturn {\n\t\t\t\tDonor: Donor,\n\t\t\t\tBloodGroup: BloodGroup\n\t\t\t};\n\t\t});\n\n\t\tDonor = models.Donor;\n\t\tBloodGroup = models.BloodGroup;\n\n\t\tapp.use(require(\"./../routes/api\")(wagner));\n\n\t\tserver = app.listen(3000);\n\n\n\t});\n\n\tafter(()=> {\n\t\tserver.close();\n\t});\n\n\tbeforeEach((done)=> {\n\n\t\tBloodGroup.remove({}, (error) => {\n\t\t\tassert.ifError(error);\n\t\t\tDonor.remove({}, (error) => {\n\t\t\t\tassert.ifError(error);\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t});\n\n\tbeforeEach((done)=> {\n\t\tlet bloodgroup, donors;\n\n\t\tbloodgroup = [\n\t\t\t{\n\t\t\t\t_id: \"A+\",\n\t\t\t\tbloodType: \"A\",\n\t\t\t\tcanDonateTo: [\"A+\", \"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A+\", \"A-\", \"O+\", \"O-\"],\n\t\t\t\tantigens: \"A\",\n\t\t\t\tantibodies: \"Anti-B\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"A-\",\n\t\t\t\tbloodType: \"A\",\n\t\t\t\tcanDonateTo: [\"A+\", \"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A-\", \"O-\"],\n\t\t\t\tantigens: \"A\",\n\t\t\t\tantibodies: \"Anti-B\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"B+\",\n\t\t\t\tbloodType: \"B\",\n\t\t\t\tcanDonateTo: [\"AB+\", \"B+\"],\n\t\t\t\tcanRecieveFrom: [\"B+\", \"B-\", \"O+\", \"O-\"],\n\t\t\t\tantigens: \"B\",\n\t\t\t\tantibodies: \"Anti-A\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"B-\",\n\t\t\t\tbloodType: \"B\",\n\t\t\t\tcanDonateTo: [\"AB+\", \"B+\", \"AB-\", \"B-\"],\n\t\t\t\tcanRecieveFrom: [\"B-\", \"O-\"],\n\t\t\t\tantigens: \"B\",\n\t\t\t\tantibodies: \"Anti-A\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"AB+\",\n\t\t\t\tbloodType: \"AB\",\n\t\t\t\tcanDonateTo: [\"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A+\", \"B+\", \"AB+\", \"O+\", \"A-\", \"B-\", \"AB-\", \"O-\"],\n\t\t\t\tantigens: \"A and B\",\n\t\t\t\tantibodies: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"AB-\",\n\t\t\t\tbloodType: \"AB\",\n\t\t\t\tcanDonateTo: [\"AB-\", \"AB+\"],\n\t\t\t\tcanRecieveFrom: [\"A-\", \"B-\", \"AB-\", \"O-\"],\n\t\t\t\tantigens: \"A and B\",\n\t\t\t\tantibodies: \"None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"O+\",\n\t\t\t\tbloodType: \"O\",\n\t\t\t\tcanDonateTo: [\"A+\", \"B+\", \"AB+\", \"O+\"],\n\t\t\t\tcanRecieveFrom: [\"O+\", \"O-\"],\n\t\t\t\tantigens: \"None\",\n\t\t\t\tantibodies: \"Anti-B and Anti-A\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: \"O-\",\n\t\t\t\tbloodType: \"O\",\n\t\t\t\tcanDonateTo: [\"O-\"],\n\t\t\t\tcanRecieveFrom: [\"O-\"],\n\t\t\t\tantigens: \"A\",\n\t\t\t\tantibodies: \"Anti-B and Anti-A\"\n\t\t\t}\n\t\t];\n\n\t\tdonors = [\n\t\t\t{\n\t\t\t\tfirstName: \"Onyancha\",\n\t\t\t\tlastName: \"Chrispinus\",\n\t\t\t\tphone: \"+256703326159\",\n\t\t\t\temail: \"onyanchachrispinus@gmail.com\",\n\t\t\t\tpassword: hashSalt+\"Chris123\",\n                loc: { coordinates:[ 32.582520, 0.347596]},\n\t\t\t\tbloodGroup: bloodgroup[0],\n\t\t\t\tdata: {\n\t\t\t\t\tlastDonation: 1546453\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tfirstName: \"Patric\",\n\t\t\t\tlastName: \"OPut\",\n\t\t\t\tphone: \"+256787453422\",\n\t\t\t\temail: \"on@gmail.com\",\n\t\t\t\tpassword: hashSalt+\"Chris1234\",\n                loc: { coordinates:[ 32.682520, 0.547596]},\n\t\t\t\tbloodGroup: bloodgroup[4],\n\t\t\t\tdata: {\n\t\t\t\t\tlastDonation: 1546453\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tfirstName: \"Onango\",\n\t\t\t\tlastName: \"denis\",\n\t\t\t\tphone: \"+256709815909\",\n\t\t\t\temail: \"ts@gmail.com\",\n\t\t\t\tpassword: hashSalt+\"Chris12345\",\n\t\t\t\tloc: { coordinates:[ 32.583520, 0.347296]},\n\t\t\t\tbloodGroup: bloodgroup[5],\n\t\t\t\tdata: {\n\t\t\t\t\tlastDonation: 1566453\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\n\n\n\t\tBloodGroup.create(bloodgroup, (error, bloodgroups)=> {\n\t\t\tassert.ifError(error);\n\t\t\t// console.log(\"The bloodgroups will be \", bloodgroups);\n\t\t\t// Donor.create(donors, (error, donors)=> {\n\t\t\t// \tassert.ifError(error);\n\t\t\t\t// console.log(\"The donors will be \", donors);\n\t\t\t\tdone();\n\t\t\t// });\n\t\t});\n\n\t});\n\n\n\tit(\"Load the first User in the database \", (done)=> {\n\n\t\tvar url = URL_ROOT + \"/donor/search/32.583520/0.347296/1/10/B+\";\n\t\tsuperagent.get(url, (error, res)=> {\n\t\t\tvar results = \"\";\n\t\t\tassert.ifError(error);\n\t\t\tassert.equal(res.status, status.OK);\n\t\t\tassert.doesNotThrow(()=> {\n\t\t\t\tresults = JSON.parse(res.text).donors;\n\t\t\t});\n\t\t\tassert.ok(results.length, 1);\n\t\t\tassert.ok(results[0].firstName, \"Onyancha\");\n\t\t\tdone();\n\t\t});\n\t});\n\n\n});"]}